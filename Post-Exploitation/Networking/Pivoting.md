# Pivoting 

[[Pivoting]]'s primary purpose is to defeat segmentation (both physically and virtually) to access an isolated network(s). Pivoting is utilising multiple hosts to cross network boundaries you would not usually have access to. [[Tunneling]] is not Pivoting; Tunneling is the encapsulation of network traffic into another protocol and routes traffic through that protocol. Lateral Movement ([[Lateral-Movement]]) is not Pivoting; Lateral movement can be described as a technique used to further our access to additional `hosts`, `applications`, and `services` within a network environment. [paloaltonetworks Lateral Movement](https://www.paloaltonetworks.com/cyberpedia/what-is-lateral-movement), [MITRE - TA0008](https://attack.mitre.org/tactics/TA0008/)

Terminology 
- `Pivot Host`
- `Proxy`
- `Foothold`
- `Beach Head system`
- `Jump Host`
- `Tunneling` encapsulation of network traffic into another protocol and routes traffic through it.
#### Networking of Pivoting

IP addresses are required for a machine to connect and communicate with a network. Usually it assign one dynamically (assigned from a list of available IPs the do not conflict with a list of statically assigned IPs or cuurently assign IPs that have already been dynamically assigned) by a [[DHCP]] server or is statically assigned. This process depends at what type of network the machine is joining. 
- IP is assigned to a physical or virtually Network Interface Controller (NIC) - sometimes referred to a network adapter
- IPv4 and potential (depending on the network) an IPv6 address will be assigned in a [dual-stack configuration](https://www.cisco.com/c/dam/en_us/solutions/industries/docs/gov/IPV6at_a_glance_c45-625859.pdf) allowing resources to be reached over IPv4 or IPv6.

To display NICs on Linux and macOS
```bash
ip a
ifconfig # legacy
```

To display NICs on Windows
```powershell
ipconfig
```

Routing tables exist to assist the system in making routing decisions. Consider [[Routers]] page

Routing tables on Linux and macOS
```bash
netstat -r
ip route
route
arp -a # ARP table
cat /proc/net/arp # because subscribe to Ippsec 
```
Routing tables on 
```powershell
netstat -r # This is equivalent to the route print command
# route
# This command is available only if the Internet Protocol (TCP/IP) protocol is installed as a component in the properties of a network adapter in Network Connections.
route [/f] [/p] [<command> [<destination>] [mask <netmask>] [<gateway>] [metric <metric>]] [if <interface>]]
```
[learn.microsoft.com route](https://learn.microsoft.com/en-us/windows-server/administration/windows-commands/route_ws2008), [learn.microsoft netstat](https://learn.microsoft.com/en-us/windows-server/administration/windows-commands/netstat)
- See [learn.microsoft for ipxroute](https://learn.microsoft.com/en-us/windows-server/administration/windows-commands/ipxroute) for [[IPX]] - https://www.baeldung.com/cs/ipx

#### Question Based Methodology - Pivoting


Does a host has more than one network adapter?
What is the network for?
What is the expected traffic?

## References

[HTB Academy Pivot Module](https://academy.hackthebox.com/)
