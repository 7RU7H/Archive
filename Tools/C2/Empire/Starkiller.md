# Starkiller

[Starkiller](https://github.com/BC-SECURITY/Starkiller) is a Frontend for PowerShell [[Empire]].
The bulk of usages are detailed in the aforementioned link, this articles contains the same tables of information, but only GUI related usage.

## Installation and Startup
Requires [[Empire]] server

```
/opt/Empire/empire --rest # Starting Empire Legacy
powershell-empire server # -h for options regard rest port and ip
```

Starting Starkiller
```
/opt/startkiller-x.x.x.AppImage
```


## GUI Menu
Menu Selection | Description 
--- |---
Listeners | Similar to Netcat or multi/handler for receiving back stagers.
Stagers | Similar to a payload with further functionality for deploying agents.
Agents | Used to interact with agents on the device to perform "tasks". 
Modules | Modules that can be used as tools or exploits.
Credentials | Reports all credentials found when using modules.
Reporting | A report of every module and command run on each agent

## Listeners
Listener Types | Description
--- | ---
http | This is the standard listener that utilizes HTTP to listen on a specific port
http_com | Uses the standard HTTP listener with an IE COM object.
http_foreign | Used to point to a different Empire server.
http_hop | Used for creating an external redirector using PHP.
http_mapi | Uses the standard HTTP listener with a MAPI COM object.
meterpreter |  Used to listen for Metasploit stagers.
onedrive | Utilizes OneDrive as the listening platform.
redirector | Used for creating pivots in a network, redirecting from one agent to another
dbx | Utilizes Dropbox as the listening platform.
http_malleable | Used alongside the malleable C2 profiles from BC|Security.
meterpreter | injectable meterpreter payloads

GUI usage: `listeners tab -> CREATE LISTENER -> configure`  

These options can be used for specifying how the listener operates and runs when started and while running. The following options can be useful for bypassing detection techniques and creating more complex listeners.

Advanced Options | Description
--- | ---
`DefaultDelay` | Attempt to simulate legitimate HTTP traffic by setting a wait interval callback time 
`DefaultJitter` | makes the traffic seem less programmatically generated by setting `DefaultDelay` to a random offset
`DefaultLostLimit` | Number of missed checkins before exiting
`KillDate` | Self-terminate the listen on all compromised hosts on a specific date
`DefaultProfile` | Will allow you to specify the profile used or User-Agent.
`Headers` | Since this is an HTTP listener it will specify HTTP headers.
`Launcher` | What launcher to use for the listener this will be prefixed on the stager.



## Stagers
Stagers are scripts that aid in staging an Agent by connecting back to the listener.

Stager Type | Description
--- | ---
multi/launcher | A fairly universal stager that can be used for a variety of devices.
windows/launcher_bat | Windows Batch file
multi/bash | Basic Bash Stager
windows/ducky | Ducky script for the USB Rubber Ducky for physical USB attacks.
windows/hta | HTA server an HTML application protocol that can be used to evade AV.
osx/applescript | Stager in AppleScript: Apple's own programming language.
osx/teensy | Similar to the rubber ducky is a small form factor micro|controller for physical attacks.

Host and transfer stager then execute with listener ready in Starkiller

## Agents

Agents are like shells that can run commands, but have various security related modules builtin for which the output returns to the powershell-empire listeners. Agents are color coded to distinguish status:

Agent Status | Description
--- | ---
Red | User is no longer responding
Black | User is responding normally 
User Icon | Normal user account
User Icon w/ Gear |  System user account

## Modules

Module | Description
--- | ---
Enumeration | Modules for general recon and information gathering
Situation | Situational awareness modules (scanners, detailed recon etc.)
Active directory | Enumeration of Active Directory (groups, users, computers etc.)
Privesc or privilege | Privilege escalation modules and scanners for local vulnerabilities
Credentials | Dumping credentials, password hashes, impersonation, tokens, tickets etc.
Persistence | Maintaining access to the system (install a backdoor etc.)
Lateral | Lateral movement, invoking commands on remote systems
Code execution | Executing code on the system using various methods
Collection | Dumping browser data, packet capturing (sniffing), keylogging, screen capturing etc.
Management | Modules for managing the system and performing various useful tasks
Exploit | Modules for various known vulnerabilities (ZeroLogon, PrintNightmare, EternalBlue etc.)

## References
[THM Empire Room]https://tryhackme.com/room/rppsempire
[infosec matters]https://www.infosecmatter.com/empire-module-library/
